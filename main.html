
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Wordsearch Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      overflow: hidden;
      font-family: 'Orbitron', sans-serif;
    }
    #container {
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      position: relative;
    }
    canvas {
      position: absolute;
      top: 0; left: 0;
      z-index: 0;
    }
    .word-grid {
      display: grid;
      gap: 5px;
      z-index: 1;
    }
    .letter {
      width: 40px;
      height: 40px;
      background: #111;
      color: #0ff;
      font-size: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 6px;
      cursor: pointer;
      box-shadow: 0 0 5px #0ff4;
      transition: 0.2s;
    }
    .letter:hover {
      background: #0ff3;
    }
    .selected {
      background: #0ff;
      color: black;
    }
    .found {
      background: #0f08;
      text-decoration: line-through;
    }
    #wordsList {
      color: #0ff;
      z-index: 2;
      margin-top: 10px;
    }
    #message {
      margin-top: 20px;
      color: gold;
      font-size: 24px;
      z-index: 2;
      display: none;
    }
    #logo, #title {
      display: none;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="logo"><img src="https://nikashum93.github.io/pusyriki/assets/kgb-logo.png" height="50"/></div>
    <div id="title">Корпорация Геймификации Будущего</div>
    <div class="word-grid" id="grid"></div>
    <div id="wordsList"></div>
    <div id="message"></div>
  </div>

  <audio id="clickSound" src="https://nikashum93.github.io/sounds/select.mp3"></audio>
  <audio id="winSound" src="https://nikashum93.github.io/sounds/win.mp3"></audio>

  <script>
    const url = new URLSearchParams(window.location.search);
    const words = url.get('words')?.split(',') || [];
    const level = url.get('level') || 'easy';
    const style = url.get('style') || 'neon';
    const caseMode = url.get('case') || 'uppercase';
    const alphabet = url.get('alphabet') || 'latin';
    const winText = url.get('winText') || 'Well done!';
    const sparkles = url.get('sparkles') === '1';
    const glossy = url.get('glossy') === '1';

    // letter sources
    const alphabets = {
      latin: "abcdefghijklmnopqrstuvwxyz",
      cyrillic: "абвгдеёжзийклмнопрстуфхцчшщэюя",
      french: "abcdefghijklmnopqrstuvwxyzéèàçôêâîûùëüï",
      german: "abcdefghijklmnopqrstuvwxyzäöüß",
      spanish: "abcdefghijklmnñopqrstuvwxyz",
      pinyin: "abcdefghijklmnopqrstuvwxyz",
      hiragana: "あいうえおかきくけこさしすせそたちつてとなにぬねの"
    };
    const letters = alphabets[alphabet] || alphabets.latin;

    function randomLetter() {
      const char = letters[Math.floor(Math.random() * letters.length)];
      return caseMode === 'uppercase' ? char.toUpperCase() : char.toLowerCase();
    }

    function createGrid(size = 10) {
      const grid = document.getElementById('grid');
      grid.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
      grid.innerHTML = '';

      const selected = [];
      for (let i = 0; i < size * size; i++) {
        const cell = document.createElement('div');
        cell.className = 'letter';
        cell.textContent = randomLetter();
        cell.addEventListener('click', () => {
          cell.classList.toggle('selected');
          document.getElementById('clickSound').play();
        });
        grid.appendChild(cell);
      }

      document.getElementById('wordsList').innerHTML = 'Слова: ' + words.join(', ');
    }

    function showWin() {
      document.getElementById('message').innerText = winText;
      document.getElementById('message').style.display = 'block';
      document.getElementById('winSound').play();
    }

    createGrid(10);
  </script>
</body>
</html>
